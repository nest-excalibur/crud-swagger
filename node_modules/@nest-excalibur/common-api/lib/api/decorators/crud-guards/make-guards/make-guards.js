"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.makeGuards = void 0;
const shared_utils_1 = require("@nestjs/common/utils/shared.utils");
const validate_each_util_1 = require("@nestjs/common/utils/validate-each.util");
const extend_metadata_util_1 = require("@nestjs/common/utils/extend-metadata.util");
const constants_1 = require("@nestjs/common/constants");
function makeGuards(methodName, target, guards) {
    const isGuardValid = (guard) => guard &&
        (shared_utils_1.isFunction(guard) ||
            shared_utils_1.isFunction(guard.canActivate));
    validate_each_util_1.validateEach(target, guards, isGuardValid, '@UseGuards', 'guard');
    extend_metadata_util_1.extendArrayMetadata(constants_1.GUARDS_METADATA, guards, target.prototype[methodName]);
}
exports.makeGuards = makeGuards;
